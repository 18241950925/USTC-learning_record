%clear
clc,clear,close all

%1
x=100
y=100
image1 = imread("/home/ubuntu/桌面/matlab/image/lena.bmp")
f=figure()
se=translate(strel(1),[x,y])
image2 = imdilate(image1,se)
subplot(1,2,1)
imshow(image1)
title('origin')
subplot(1,2,2)
imshow(image2)
title('translation')

%2
x=60
image3= imrotate(image1,x)
image4 = imrotate(image1,x,'bilinear')
f2=figure()
subplot(1,3,1)
imshow(image1)
title('origin')
subplot(1,3,2)
imshow(image3)
title('nearest')
subplot(1,3,3)
imshow(image4)
title('bilinear')

%3
x=2, y=0.5
[h,w,c]=size(image1)
image5 = imresize(image1,[h/x,w/y])
image6 = imresize(image1,[h/x,w/y],'bilinear')
f3=figure()
subplot(1,3,1)
imshow(image1)
title('origin')
subplot(1,3,2)
imshow(image5)
title('nearest')
subplot(1,3,3)
imshow(image6)
title('bilinear')

%4
image7 = imread("/home/ubuntu/桌面/matlab/image/alphabet1.jpg")
image8 = imread("/home/ubuntu/桌面/matlab/image/alphabet2.jpg")

figure;
subplot(1,3,1);
imshow(image7);
title('Original Image 1');

subplot(1,3,2);
imshow(image8);
title('Original Image 2');

%cpselect(image8,image7);

fixedPoints = [111.125000000000,77.6250000000000;99.1250000000000,103.875000000000;123.625000000000,103.625000000000;93.3750000000000,119.375000000000;129.375000000000,119.375000000000;89.3750000000000,133.125000000000;133.875000000000,133.125000000000;88.8750000000000,169.625000000000;134.125000000000,169.875000000000;39.6250000000000,30.6250000000000;71.3750000000000,30.8750000000000;103.625000000000,30.3750000000000;142.625000000000,28.6250000000000;211.375000000000,20.8750000000000;210.125000000000,65.3750000000000;46.8750000000000,90.3750000000000;22.3750000000000,132.875000000000;63.6250000000000,131.375000000000;43.3750000000000,195.875000000000;83.1250000000000,196.625000000000;133.625000000000,199.625000000000;188.625000000000,203.625000000000];

movingPoints = [98.8750000000000,73.8750000000000;88.3750000000000,100.875000000000;111.125000000000,101.125000000000;84.6250000000000,115.875000000000;118.375000000000,118.875000000000;79.8750000000000,129.375000000000;123.375000000000,132.875000000000;81.1250000000000,166.125000000000;125.375000000000,172.375000000000;32.8750000000000,28.3749999999999;60.1250000000000,27.8749999999999;89.8750000000000,28.3749999999999;127.375000000000,27.1249999999999;198.625000000000,20.3749999999999;198.875000000000,66.3749999999999;40.6250000000000,83.3750000000000;18.3750000000000,123.125000000000;55.8750000000000,125.125000000000;38.8750000000000,189.125000000000;75.1250000000000,194.625000000000;125.875000000000,205.125000000000;187.125000000000,217.125000000000];

tform = fitgeotrans(movingPoints,fixedPoints, 'Projective');

% 应用仿射转换
corrected_image8 = imwarp(image8, tform, 'OutputView', imref2d(size(image7)));


subplot(1,3,3);
imshow(corrected_image8);
title('Corrected Image 2');